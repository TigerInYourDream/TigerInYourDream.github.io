<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Pacifico:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"imzy.vip","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
<meta property="og:type" content="website">
<meta property="og:title" content="TID&#39;s Blog">
<meta property="og:url" content="https://imzy.vip/index.html">
<meta property="og:site_name" content="TID&#39;s Blog">
<meta property="og:description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="TigerInYourDream">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://imzy.vip/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>TID's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">TID's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-一言">

    <a href="/motto" rel="section"><i class="fa fa-camera fa-fw"></i>一言</a>

  </li>
        <li class="menu-item menu-item-友链">

    <a href="/friends" rel="section"><i class="fa fa-american-sign-language-interpreting fa-fw"></i>友链</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzy.vip/posts/64160/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TigerInYourDream">
      <meta itemprop="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TID's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/64160/" class="post-title-link" itemprop="url">Logout Issue</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-07-31 10:22:47 / 修改时间：02:30:04" itemprop="dateCreated datePublished" datetime="2025-07-31T10:22:47+00:00">2025-07-31</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>20k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>18 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Logout-Issues"><a href="#Logout-Issues" class="headerlink" title="Logout Issues"></a>Logout Issues</h1><h2 id="Logout-Issues-1"><a href="#Logout-Issues-1" class="headerlink" title="Logout Issues"></a>Logout Issues</h2><p>Before describing the logout issues, let’s define two concepts:</p>
<ul>
<li>logout: Clicking the logout button to exit robrix by interacting with matrix</li>
<li>shut down: Clicking x to exit the robrix processS</li>
</ul>
<h3 id="The-Earliest-‘Dead-Pool’-Issue-in-Logout"><a href="#The-Earliest-‘Dead-Pool’-Issue-in-Logout" class="headerlink" title="The Earliest ‘Dead-Pool’ Issue in Logout"></a>The Earliest ‘Dead-Pool’ Issue in Logout</h3><p><a target="_blank" rel="noopener" href="https://github.com/project-robius/robrix/pull/432#discussion%5C%5C_r2171202111">https://github.com/project-robius/robrix/pull/432#discussion\_r2171202111</a><br>The commit hash at that time was e1f80ea<br>The key code was as follows:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Logs out the current user and prepares the application for a new login session.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// Performs server-side logout, cleans up client state, closes all tabs,</span></span><br><span class="line"><span class="comment">/// and restarts the Matrix runtime. Reports success or failure via LoginAction.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// # Parameters</span></span><br><span class="line"><span class="comment">/// - is_desktop - Boolean indicating if the current UI mode is desktop (true) or mobile (false).</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// # Returns</span></span><br><span class="line"><span class="comment">/// - Ok(()) - Logout succeeded (possibly with cleanup warnings)</span></span><br><span class="line"><span class="comment">/// - Err(...) - Logout failed with detailed error</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">logout_and_refresh</span></span>(is_desktop :<span class="built_in">bool</span>) -&gt; <span class="built_in">Result</span>&lt;()&gt; &#123;</span><br><span class="line">    <span class="comment">// Collect all errors encountered during the logout process</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> errors = <span class="built_in">Vec</span>::new();</span><br><span class="line">    log!(<span class="string">&quot;Starting logout process...&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="literal">Some</span>(client) = get_client() <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> error_msg = <span class="string">&quot;Logout failed: No active client found&quot;</span>;</span><br><span class="line">        log!(<span class="string">&quot;Error: &#123;&#125;&quot;</span>, error_msg);</span><br><span class="line">        Cx::post_action(LogoutAction::LogoutFailure(error_msg.to_string()));</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">Err</span>(anyhow::anyhow!(error_msg));</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> !client.matrix_auth().logged_in() &#123;</span><br><span class="line">        <span class="keyword">let</span> error_msg = <span class="string">&quot;Client not logged in, skipping server-side logout&quot;</span>;</span><br><span class="line">        log!(<span class="string">&quot;Error: &#123;&#125;&quot;</span>, error_msg);</span><br><span class="line">        Cx::post_action(LogoutAction::LogoutFailure(error_msg.to_string()));</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">Err</span>(anyhow::anyhow!(error_msg));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    get_sync_service().unwrap().stop().<span class="keyword">await</span>;</span><br><span class="line"></span><br><span class="line">    log!(<span class="string">&quot;Performing server-side logout...&quot;</span>);</span><br><span class="line">    <span class="keyword">match</span> tokio::time::timeout(tokio::time::Duration::from_secs(<span class="number">5</span>), client.matrix_auth().logout()).<span class="keyword">await</span> &#123;</span><br><span class="line">        <span class="literal">Ok</span>(<span class="literal">Ok</span>(_)) =&gt; &#123;</span><br><span class="line">            log!(<span class="string">&quot;Server-side logout successful.&quot;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="literal">Ok</span>(<span class="literal">Err</span>(e)) =&gt; &#123;</span><br><span class="line">            <span class="keyword">let</span> error_msg = <span class="built_in">format!</span>(<span class="string">&quot;Server-side logout failed: &#123;&#125;. Please try again later&quot;</span>, e);</span><br><span class="line">            log!(<span class="string">&quot;Error :&#123;&#125;&quot;</span>, error_msg);</span><br><span class="line">            Cx::post_action(LogoutAction::LogoutFailure(error_msg.to_string()));</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">Err</span>(anyhow::anyhow!(error_msg));</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="literal">Err</span>(_) =&gt; &#123;</span><br><span class="line">            <span class="keyword">let</span> error_msg = <span class="string">&quot;Server-side logout timed out after 5 seconds. Please try again later&quot;</span>;</span><br><span class="line">            log!(<span class="string">&quot;Error: &#123;&#125;&quot;</span>, error_msg);</span><br><span class="line">            Cx::post_action(LogoutAction::LogoutFailure(error_msg.to_string()));</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">Err</span>(anyhow::anyhow!(error_msg));</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Clean up client state and caches</span></span><br><span class="line">    log!(<span class="string">&quot;Cleaning up client state and caches...&quot;</span>);</span><br><span class="line">    CLIENT.lock().unwrap().take();</span><br><span class="line">    SYNC_SERVICE.lock().unwrap().take();</span><br><span class="line">    TOMBSTONED_ROOMS.lock().unwrap().clear();</span><br><span class="line">    IGNORED_USERS.lock().unwrap().clear();</span><br><span class="line">    DEFAULT_SSO_CLIENT.lock().unwrap().take();</span><br><span class="line">    <span class="comment">// Note: Taking REQUEST_SENDER closes the channel sender, causing the async_worker task to exit its loop</span></span><br><span class="line">    <span class="comment">// This triggers the &quot;async_worker task ended unexpectedly&quot; error in the monitor task, but this is expected during logout</span></span><br><span class="line">    REQUEST_SENDER.lock().unwrap().take();</span><br><span class="line">    log!(<span class="string">&quot;Client state and caches cleared after successful server logout.&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Desktop UI has tabs that must be properly closed, while mobile UI has no tabs concept.</span></span><br><span class="line">    <span class="keyword">if</span> is_desktop &#123;</span><br><span class="line">        log!(<span class="string">&quot;Requesting to close all tabs in desktop&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> (tx, rx)  = oneshot::channel::&lt;<span class="built_in">bool</span>&gt;();</span><br><span class="line">        Cx::post_action(MainDesktopUiAction::CloseAllTabs &#123; on_close_all: tx &#125;);</span><br><span class="line">        <span class="keyword">match</span> rx.<span class="keyword">await</span> &#123;</span><br><span class="line">            <span class="literal">Ok</span>(_) =&gt; &#123;</span><br><span class="line">                log!(<span class="string">&quot;Received signal that the MainDesktopUI successfully closed all tabs&quot;</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="literal">Err</span>(e)=&gt; &#123;</span><br><span class="line">                <span class="keyword">let</span> error_msg = <span class="built_in">format!</span>(<span class="string">&quot;Close all tab failed &#123;e&#125;&quot;</span>);</span><br><span class="line">                log!(<span class="string">&quot;Error :&#123;&#125;&quot;</span>, error_msg);</span><br><span class="line">                Cx::post_action(LogoutAction::LogoutFailure(error_msg.to_string()));</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">Err</span>(anyhow::anyhow!(error_msg));</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    log!(<span class="string">&quot;Deleting latest user ID file...&quot;</span>);</span><br><span class="line">    <span class="comment">// We delete latest_user_id here for the following reasons:</span></span><br><span class="line">    <span class="comment">// 1. we delete the latest user ID such that Robrix won&#x27;t auto-login the next time it starts,</span></span><br><span class="line">    <span class="comment">// 2. we don&#x27;t delete the session file, such that the user could re-login using that session in the future.</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> <span class="literal">Err</span>(e) = delete_latest_user_id().<span class="keyword">await</span> &#123;</span><br><span class="line">        errors.push(e.to_string());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    shutdown_background_tasks().<span class="keyword">await</span>;</span><br><span class="line">    <span class="comment">// Restart the Matrix tokio runtime</span></span><br><span class="line">    <span class="comment">// This is a critical step; failure might prevent future logins</span></span><br><span class="line">    log!(<span class="string">&quot;Restarting Matrix tokio runtime...&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> start_matrix_tokio().is_err() &#123;</span><br><span class="line">        <span class="comment">// Send failure notification and return immediately, as the runtime is fundamental</span></span><br><span class="line">        <span class="keyword">let</span> final_error_msg = <span class="built_in">String</span>::from(<span class="string">&quot;Logout succeeded, but Robrix could not re-connect to the Matrix backend. Please exit and restart Robrix&quot;</span>);</span><br><span class="line">        Cx::post_action(LogoutAction::LogoutFailure(final_error_msg.clone()));</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">Err</span>(anyhow::anyhow!(final_error_msg));</span><br><span class="line">    &#125;</span><br><span class="line">    log!(<span class="string">&quot;Matrix tokio runtime restarted successfully.&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// --- Final result handling ---</span></span><br><span class="line">    <span class="keyword">if</span> errors.is_empty() &#123;</span><br><span class="line">        <span class="comment">// Complete success</span></span><br><span class="line">        log!(<span class="string">&quot;Logout process completed successfully.&quot;</span>);</span><br><span class="line">        Cx::post_action(LogoutAction::LogoutSuccess);</span><br><span class="line">        <span class="literal">Ok</span>(())</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Partial success (server logout ok, but cleanup errors)</span></span><br><span class="line">        <span class="keyword">let</span> warning_msg = <span class="built_in">format!</span>(</span><br><span class="line">            <span class="string">&quot;Logout completed, but some cleanup operations failed: &#123;&#125;&quot;</span>,</span><br><span class="line">            errors.join(<span class="string">&quot;; &quot;</span>)</span><br><span class="line">        );</span><br><span class="line">        log!(<span class="string">&quot;Warning: &#123;&#125;&quot;</span>, warning_msg);</span><br><span class="line">        Cx::post_action(LogoutAction::LogoutSuccess);</span><br><span class="line">        <span class="literal">Ok</span>(())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">fn</span> <span class="title">shutdown_background_tasks</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> rt_guard = TOKIO_RUNTIME.lock().unwrap();</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> <span class="literal">Some</span>(existing_rt) = rt_guard.take() &#123;</span><br><span class="line">        existing_rt.shutdown_background();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>The operations that triggered the panic were:</p>
<ol>
<li>Desktop mode open multiple rooms.</li>
<li>Switch to mobile.</li>
<li>Logout in mobile.</li>
<li>Enlarge the window large enough for desktop.</li>
<li>Login again.</li>
<li>(panic)</li>
</ol>
<p>At that time, two issues were identified:</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/64160/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzy.vip/posts/12714/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TigerInYourDream">
      <meta itemprop="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TID's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/12714/" class="post-title-link" itemprop="url">为 C++程序写 rustbinding</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-08-12 23:24:49" itemprop="dateCreated datePublished" datetime="2024-08-12T23:24:49+00:00">2024-08-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-31 02:30:04" itemprop="dateModified" datetime="2025-07-31T02:30:04+00:00">2025-07-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/rust/" itemprop="url" rel="index"><span itemprop="name">rust</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="为-C-程序写-rustbinding"><a href="#为-C-程序写-rustbinding" class="headerlink" title="为 C++程序写 rustbinding"></a>为 C++程序写 rustbinding</h1><h2 id="AutoCxx-与-CWrapper-Bindgen"><a href="#AutoCxx-与-CWrapper-Bindgen" class="headerlink" title="AutoCxx 与 CWrapper+Bindgen"></a>AutoCxx 与 CWrapper+Bindgen</h2><p><a target="_blank" rel="noopener" href="https://www.notion.so/c-ruts-binding-d617fe66712241ca830107a1c2020761?pvs=21">为 c++程序写 ruts-binding</a></p>
<p>在代码的世界中，还是 c和 cpp站绝大多数，现在提一个比较常见的需求：提供一个 c++的程序，最终需要再 rust中调用 c++程序提供的接口。</p>
<p>一般来说有两个方法</p>
<ol>
<li>直接使用 cxx autocxx为 rust代码生成一份 unsafe的代码，然后直接调用</li>
<li>第二种方法比较路径稍长，先针对 c++代码的 header 写一份 c风格的头文件cwrapper，然后针对 c的头文件写一份 c头文件的实现。接下来编译自己的cwrapper，生成一份新的动态库。接下来使用 bindgen 根据 cwrapper生成一份 unsafe rust。最后在 rust代码中调用。</li>
</ol>
<p>总体来说 cxx 或者 autocxx 可能性能会更好一些，但是 autocxx并不能搞定一切。第二种方法胜在稳定，毕竟 c的 abi比较稳定。本文将采用后一种方法。</p>
<h2 id="速成材料"><a href="#速成材料" class="headerlink" title="速成材料"></a>速成材料</h2><p>技术基础是：会 rust，不会 c++或者 c。所以需要速成，了解 c和 c++。如果彻底不会 c++，写 bingen 无从谈起。</p>
<p>下面是一些材料</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/12714/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzy.vip/posts/43396/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TigerInYourDream">
      <meta itemprop="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TID's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/43396/" class="post-title-link" itemprop="url">sonala合约</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-06-12 20:00:49" itemprop="dateCreated datePublished" datetime="2024-06-12T20:00:49+00:00">2024-06-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-31 02:30:04" itemprop="dateModified" datetime="2025-07-31T02:30:04+00:00">2025-07-31</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="solana合约学习"><a href="#solana合约学习" class="headerlink" title="solana合约学习"></a>solana合约学习</h1><p>本文是对 solan相关问题介绍，主要用于记录solana合约的学习过程。因为现阶段还没有十分深入的学习 solana的细节，所以目标限定在 solana的简单合约编写，环境搭建，测试。</p>
<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>因为是学习指南，所以会先强调学习的基础。本文的基础建立在会 rust基础上，明白 rust的语法，可以达到 rust编写简单代码的基础之上。因为 solana 合约是直接使用 rust编写的。如果不具备简单的 rust基础，请先学习 rust book，至少了解 rust的基本语法。</p>
<h2 id="solana环境"><a href="#solana环境" class="headerlink" title="solana环境"></a>solana环境</h2><p>因为 solana有自己的介绍文档，不再重复介绍solana概念。下面主要讲剩余部分。</p>
<ol>
<li>开发环境<ol>
<li>主要就是 rust环境，可以去 rust官网上直接安装 rust环境。因为 rust已经比较成熟，没有特别的问题，直接安装最新环境。</li>
<li>编辑器，因为是直接使用 rust开发solana 合约的，所以主流的 VSCODE Rustrover vim zed emacs都可以。选择自己喜欢的就好。</li>
<li>solana cli工具。<a target="_blank" rel="noopener" href="https://solana.com/developers/guides/getstarted/local-rust-hello-world">https://solana.com/developers/guides/getstarted/local-rust-hello-world</a></li>
<li>cli工具是生成地址，链接 solana节点，部署合约的基础。后面会继续提到一些注意事项，请务必参考安装的的注意事项。</li>
<li>anchor  anchor是 solana 的“框架”，可以去 anchor官网安装 solana框架。后面也有注意事项。</li>
<li>以上的套件理论上是全部需要的。如果你只是使用solana native开发，可以不使用 anchor。也就可以不用安装 anchor 套件。</li>
</ol>
</li>
</ol>
<h2 id="环境安装中的特殊问题"><a href="#环境安装中的特殊问题" class="headerlink" title="环境安装中的特殊问题"></a>环境安装中的特殊问题</h2><ol>
<li>根据目前 2024年06月08日20:17:14 时间 solana 是 v1.18.15。 solana 本身并不是直接安装最新版本就好了。最新版本可能出现编译不过，获取有一些更加具体的字节超量的编译问题。这时候就需要回退到历史版本。可以看下面的链接。当然如果你非常幸运，安装之后完全没有问题就不必折腾。事实是，我安装了最新版之后一直无法通过编译，然后不得不安装下面的方案回退。</li>
<li><a target="_blank" rel="noopener" href="https://www.notion.so/cd22ecfe315d4acbb83c68ca8a3d7b30?pvs=21">https://www.notion.so/alvinvip/cd22ecfe315d4acbb83c68ca8a3d7b30?pvs=4#14fa26df7432402ebf18529fecf20e40</a></li>
<li>anchor也存在以上问题，最新版无法运行。这样采用上面的办法即可，直接退版本。</li>
<li><a target="_blank" rel="noopener" href="https://book.anchor-lang.com/getting_started/installation.html">https://book.anchor-lang.com/getting_started/installation.html</a></li>
<li>注意查看版本关系 anchor 0.30需要使用最新的 solana v1.18.15（务必注意时间，后续升级必须兼顾 solana版本和 anchor版本）</li>
</ol>
<h3 id="测试问题"><a href="#测试问题" class="headerlink" title="测试问题"></a>测试问题</h3>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/43396/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzy.vip/posts/44402/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TigerInYourDream">
      <meta itemprop="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TID's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/44402/" class="post-title-link" itemprop="url">REVM代码阅读 02</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-05-28 20:23:51" itemprop="dateCreated datePublished" datetime="2024-05-28T20:23:51+00:00">2024-05-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-31 02:30:04" itemprop="dateModified" datetime="2025-07-31T02:30:04+00:00">2025-07-31</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="REVM代码阅读-02"><a href="#REVM代码阅读-02" class="headerlink" title="REVM代码阅读 02"></a>REVM代码阅读 02</h1><h2 id="前文介绍"><a href="#前文介绍" class="headerlink" title="前文介绍"></a>前文介绍</h2><p>在 01章节，对阅读 revm做了一些预先的准备工作，主要包括了解solidity语言，学习 OPCODES以及自顶向下了解 evm的基本结构三部分。其中第三部分最好大致实现征战虚拟机栈的运行过程加深理解。现在开始阅读 revm代码。阅读代码的过程比较枯燥，请保持耐心。</p>
<p>针对单独实现的 evm不在少数，使用 rust编写的 evm也不是唯一的。有下面的两个</p>
<p><a target="_blank" rel="noopener" href="https://github.com/rust-ethereum/evm">https://github.com/rust-ethereum/evm</a></p>
<p>以上是 rust-ethereum名下的 evm项目，他是 parity名下的项目，在项目中提到 polkdot项目就使用该虚拟机。</p>
<p>另外一个就是我们看的 evm revm</p>
<p><a target="_blank" rel="noopener" href="https://github.com/bluealloy/revm">https://github.com/bluealloy/revm</a></p>
<p>也有众多的以太坊生态项目使用该虚拟机。该项目拥有一本 books来介绍虚拟机的设计思路。在初步阅读代码之前，我们先阅读文档来了解 revm的整体设计思路。</p>
<p><a target="_blank" rel="noopener" href="https://bluealloy.github.io/revm/">https://bluealloy.github.io/revm/</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/44402/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzy.vip/posts/44082/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TigerInYourDream">
      <meta itemprop="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TID's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/44082/" class="post-title-link" itemprop="url">REVM代码阅读 01</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-05-15 14:51:16" itemprop="dateCreated datePublished" datetime="2024-05-15T14:51:16+00:00">2024-05-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-31 02:30:04" itemprop="dateModified" datetime="2025-07-31T02:30:04+00:00">2025-07-31</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="REVM代码阅读-01"><a href="#REVM代码阅读-01" class="headerlink" title="REVM代码阅读 01"></a>REVM代码阅读 01</h1><p>经过一些时间的准备，现在进行 REVM代码的阅读</p>
<h3 id="准备环节"><a href="#准备环节" class="headerlink" title="准备环节"></a>准备环节</h3><p>这些准备主要包括一下的方面</p>
<ol>
<li>速览 《精通以太坊》，有一个全局的认识</li>
<li><a target="_blank" rel="noopener" href="https://github.com/WTFAcademy/WTF-Solidity">https://github.com/WTFAcademy/WTF-Solidity</a> 通过这些资料来了解 solidity的语法。我的标准是学习完上面的课程并且完成习题，通过认证。</li>
<li><a target="_blank" rel="noopener" href="https://www.wtf.academy/docs/evm-opcodes-101">https://www.wtf.academy/docs/evm-opcodes-101</a> 通过这些资料来学习以太坊的操作码 OPCODE， 因为不会 python， 所以使用 rust实现了其中其中的逻辑。可以参考这个链接<a target="_blank" rel="noopener" href="https://github.com/TigerInYourDream/naive/_evm">https://github.com/TigerInYourDream/naive\_evm</a> 。主要需要跑通其中的用例（执行其中的 bytecode）。（至少做完 101 和 102）</li>
</ol>
<p>做出了以上的准备之后，可以对以太坊虚拟机有一个整体性认识。其中改的代码可以参考上面的链接阅读。</p>
<h3 id="总体概览"><a href="#总体概览" class="headerlink" title="总体概览"></a>总体概览</h3><p>经过以上的准备，对以太坊虚拟机有了一个感性的认识。从最简单的模型，以太坊虚拟机就是一个栈的数据结构，每次把b solidit编译成对应的 bytecode,然后拆分成一个又一个的 op code。把 op code按照栈的方式一次执行就完成了“虚拟机”的工作。</p>
<p>下面图来自于 WFT Academy的 op code 101教程，从高层次展示了以太坊虚拟机的结构</p>
<p><img src="https://image-bucket-for-alvin.oss-cn-beijing.aliyuncs.com/img/evm_overview.png" alt="https://image-bucket-for-alvin.oss-cn-beijing.aliyuncs.com/img/evm\_overview.png"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/44082/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzy.vip/posts/35993/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TigerInYourDream">
      <meta itemprop="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TID's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/35993/" class="post-title-link" itemprop="url">diesel使用小要点</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-14 18:39:14" itemprop="dateCreated datePublished" datetime="2021-10-14T18:39:14+00:00">2021-10-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-31 02:30:04" itemprop="dateModified" datetime="2025-07-31T02:30:04+00:00">2025-07-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">技术笔记</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="diesel使用的一些小知识点"><a href="#diesel使用的一些小知识点" class="headerlink" title="diesel使用的一些小知识点"></a>diesel使用的一些小知识点</h1><p>最近因为使用diesel，大致看了diesel的文档同时结合自己两天内写代码的经验，总结出下面几条要点，作为参考。严格来说，这些知识点比较琐碎不能够成为一篇文章，但是想到可以为自己以后使用diesel作参考还是写出来。</p>
<ol>
<li><p>设置好.env之后 diesel setup   是创建数据库的 </p>
</li>
<li><p>diesel migration generate create_posts   最后一个参数是创建migration的文件夹名的 它会生成一个带时间的migration文件  里面有个up和down的sql up 里面负责创建数据库表的  down 里面负责撤回车操作的 </p>
</li>
<li><p>up 和 down 里面的sql要自己创建 </p>
</li>
<li><p>diesel migration run  执行migration里面的up.sql的操作的 确切的说就是建表 5. diesel migration redo 执行migration里面的down.sql的操作 确切的拉说是删除表 </p>
</li>
<li><p>注意了 setup是会创建数据库和直接运行migration run中的建表数据的 但是如果数据库存在是不会运行的。如果在  migration中添加，后续这个也是不会运行的 </p>
</li>
<li><p>这一步进行之后schema文件也会生成。这个文件是可以改的 ，但是不建议改 </p>
</li>
<li><p>如果升级数据库，请使用新的migration文件 </p>
</li>
<li><p>注意使用extern crate diesel 和#[marco use],不然schema下的东西又是找不到的</p>
<p> 以上的条目中需要补充的还有如下</p>
<blockquote>
<p>本来以为在rust2018版本以后，就完全不使用extern crate了。但是事实证明还是需要extern crate diesel和#[marco_use]的，不然会有很多东西找不到</p>
</blockquote>
<blockquote>
<p>使用diesel尽量引入prelude::*  虽然我不喜欢这样引入，但是自己精确引入会很麻烦</p>
</blockquote>
<blockquote>
<p>一定要注意schema文件</p>
</blockquote>
</li>
</ol>
<h2 id="如果使用只是使用diesel查询和写入如何简化代码"><a href="#如果使用只是使用diesel查询和写入如何简化代码" class="headerlink" title="如果使用只是使用diesel查询和写入如何简化代码"></a>如果使用只是使用diesel查询和写入如何简化代码</h2><p>这个问题会显的很奇怪，因为作为一个ORM，本来就是辅助我们进行增删改查的。其实我们看了diesel的官方指引之后就会觉得这个问题很合理。重新表述如下</p>
<blockquote>
<p>根据diesel的官方指引，我们是用建立连接，建立数据库，设计表这几个步骤一路走下来的。实际上，大多数时候，数据表并不是我们建立的。我们只需要使用diesel的库，连接数据库CRUD即可。这种情况下，如何简化操作呢？</p>
</blockquote>
<p>根据我的尝试大致需要如下</p>
<ol>
<li><p>引入库，这个是必须的</p>
</li>
<li><p>设置sql路径，这个是必须的</p>
</li>
<li><p>无需diesel setup因为我们不需要建立数据库，数据库是存在的</p>
</li>
<li><p>无需diesle migration run 因为表也不是我们建立的。</p>
</li>
<li><p>没有建表，没运行diesel migration run，则diesel不会为我们自动建立schema.rs文件，也不会在schema.rs中生成table宏的语法。所以我们需要手动去建立schema.rs的文件，src/schema.rs。就是必须建立的在src路径下面。这样才不会出错。然后我们在schema.rs中手动写入 table!宏。这样才可以正常使用。</p>
</li>
<li><p>以上的步骤是可以正常使用的，也是文件最少的情况。还有下面的情况补充</p>
<blockquote>
<p>如果我们运行了diesel set 如果数据库存在，是不会建立数据库的。会产生一个migrations文件。一个和Cargo.toml同级别的diesel.toml文件，里面配置了schema.rs文件的位置。  所以上一步中如果不运行diesel set，需要我们手动把schema文件放在指定的位置。</p>
<p>同时，因为我们 不建表，所以不运行diesel migration run。schema里面是空的，为了正确使用orm的方便特性，我们得去手动补全这个文件，自己写table!宏。当然这个很容易。看example即可</p>
</blockquote>
<p> 一些零碎的知识，其他的正常使用参考文档即可。这个算是在文档之外的补充备查！</p>
</li>
</ol>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/35993/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzy.vip/posts/26767/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TigerInYourDream">
      <meta itemprop="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TID's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/26767/" class="post-title-link" itemprop="url">占星与星座计算 morinus house system</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-10 22:37:53" itemprop="dateCreated datePublished" datetime="2021-08-10T22:37:53+00:00">2021-08-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-31 02:30:04" itemprop="dateModified" datetime="2025-07-31T02:30:04+00:00">2025-07-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A9%E6%96%87%E5%AD%A6/" itemprop="url" rel="index"><span itemprop="name">天文学</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="占星与星座计算-morinus-house-system"><a href="#占星与星座计算-morinus-house-system" class="headerlink" title="占星与星座计算 morinus house system"></a>占星与星座计算 morinus house system</h1><p>在系列前三节，已经基本介绍了和占星有关的模型，基本的分宫制的原理和占星以及天文中所出现的术语，这一节将带大家进行一次实际的占星计算。本文仅涉及星盘的计算，不涉及其他。</p>
<p>本文的重点是星盘的计算。本文将采用莫林分宫制morinus house system！至于为什么选择莫林分宫制，是因为莫林分宫制可以找到具体的数学计算公式，便于计算。且莫林分宫制在高纬度地区受到的扭曲小。至于分宫制的基本原理，可以查看上一节分宫制基本原理。</p>
<blockquote>
<p>对于“morinus house system”是有专门的计算方法，通过一系列的加减乘除算出一个人出生时的MC、Asc以及每个宫头所在得度数，就可以排出一个近乎完整的星图了。</p>
</blockquote>
<blockquote>
<p>ASC：东升点是在诞生时刻在诞生地点的东面地平与黄道交接的一点</p>
</blockquote>
<blockquote>
<p>MC：天顶</p>
</blockquote>
<p>我们在计算的时候需要以下参数</p>
<ol>
<li>当事人的出生位置，需要从具体地点转化成经纬度</li>
<li>出生时间，需要转化为恒星时</li>
<li>黄赤交角，这个是固定值。关于黄赤交角可以看第一节天球部分。23°27′</li>
<li>以及如下公式</li>
</ol>
<blockquote>
<p>MC = arctan(tan(RAMC) / cos(e))</p>
</blockquote>
<blockquote>
<p>RAMC为上中天的赤经度数</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/26767/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzy.vip/posts/3102/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TigerInYourDream">
      <meta itemprop="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TID's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/3102/" class="post-title-link" itemprop="url">占星与星座计算  儒略历和恒星时计算</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-07 22:35:15" itemprop="dateCreated datePublished" datetime="2021-08-07T22:35:15+00:00">2021-08-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-31 02:30:04" itemprop="dateModified" datetime="2025-07-31T02:30:04+00:00">2025-07-31</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="占星与星座计算-儒略历和恒星时计算"><a href="#占星与星座计算-儒略历和恒星时计算" class="headerlink" title="占星与星座计算  儒略历和恒星时计算"></a>占星与星座计算  儒略历和恒星时计算</h1><p>在前两节的文章基础之上，我们开始进行真正的计算。在介绍计算星盘之前，我们需要一个预先准备的数据。儒略历和恒星时。网上的现成代码似乎没有说的很清楚，公式不够统一，结果也难以验证，为此参考了很多资料。其中有两个资料确定是对的。</p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%81%92%E6%98%9F%E6%97%B6">https://zh.wikipedia.org/wiki/恒星时</a></p>
<p>上面公式中关于儒略历的转化公式是正确的，请注意其中的高斯符号。高斯符号相当于代码中的floor()函数。</p>
<p>后面关于恒星时的计算不确定正确性。</p>
<p>然后参考一份关于天文算法的论文，或者是一本翻译的PDF。感谢“冯剑和他的译友”翻译了这本天文算法，使我得到了确切的公式。</p>
<p>关于什么是恒星时可以也可以参考上面的wiki。</p>
<p>关于结果，分别得到了多项式T，算出来以角度为单位的恒星时，以时间hour为单位的恒星时，以时分秒为单位的恒星时。</p>
<blockquote>
<p>现在公历纪元的年表示为Y、月为M、日为D、时为h、分为m、秒为s，1月、2月分别当做上一年的13月、14月。（例：2010年1月1日时Y=2009, M=13, D=1），然后求出儒略日</p>
</blockquote>
<p>计算儒略历请注意以上的重点。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/3102/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzy.vip/posts/13704/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TigerInYourDream">
      <meta itemprop="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TID's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/13704/" class="post-title-link" itemprop="url">占星与星座计算 黄道十二宫与分宫原理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-06 20:29:32" itemprop="dateCreated datePublished" datetime="2021-08-06T20:29:32+00:00">2021-08-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-31 02:30:04" itemprop="dateModified" datetime="2025-07-31T02:30:04+00:00">2025-07-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A9%E6%96%87/" itemprop="url" rel="index"><span itemprop="name">天文</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="占星与星座计算-黄道十二宫与分宫原理"><a href="#占星与星座计算-黄道十二宫与分宫原理" class="headerlink" title="占星与星座计算 黄道十二宫与分宫原理"></a>占星与星座计算 黄道十二宫与分宫原理</h1><p>在占星与星座计算的第一篇文章中，尽可能详细的介绍了天球的构建过程原理和相关的概念。这一节我来介绍何为黄道12宫以及分工制的基本原理，不涉及具体分宫制。</p>
<h2 id="黄道带"><a href="#黄道带" class="headerlink" title="黄道带"></a>黄道带</h2><p>上一节的天球示意图中，我们已经标注出来了黄道，就是假定地球不动，太阳绕地球运动所形成的面，就是黄道。因为地球自转和地球公转是有一定角度偏差的。所以黄道和赤道是有一个23.5度的夹角的。</p>
<blockquote>
<p>黄道带（或是黄道十二宫）的概念起源于巴比伦占星术，巴比伦人注意到了与太阳同时升起的星星，在黎明之前，可以观察到靠近太阳位置的星星升起，这些星星以一个似乎规则的圆周来回运动。他们将这些星星分为十二组，并给其命名。希腊人从巴比伦人那里继承了这一习惯，才有了黄道十二宫，这个词来源于希腊文zodion，意为“小动物”。</p>
</blockquote>
<p>具体的黄道带的概念如下</p>
<blockquote>
<p>黄道带（希腊语：ζῳδιακός, zōdiakos），是天文学的名词，指的是在黄道上的星座组成的环带，不仅是太阳每年在天球上所行经的路径，月球和行星的路径也大略都在黄道的附近，因此也全部都在黄道带的星座内。 在占星术，黄道带被人为划分为十二个随中气点移动（与实际星座位置不一致）的均等区域，各自都有符号。 因此，黄道带是一个天球坐标系统，或是更具体的说是一个黄道坐标系统，以黄道做为纬度的基准平面（原点），并且以太阳在春分时的位置作为经度的原点</p>
</blockquote>
<p>黄道12宫的顺序如下</p>
<blockquote>
<p>白羊宫（Aries, ♈︎）；<br>金牛宫（Taurus, ♉︎）；<br>双子宫（Gemini, ♊︎）；<br>巨蟹宫（Cancer, ♋︎）；<br>狮子宫（Leo, ♌︎）；<br>处女宫（Virgo, ♍︎）；<br>天秤宫（Libra, ♎︎）；<br>天蝎宫（Scorpio, ♏︎）；<br>射手宫（Sagittarius, ♐︎）；<br>摩羯宫（Capricornus, ♑︎）；<br>水瓶宫（Aquarius, ♒︎）；<br>双鱼宫（Pisces, ♓︎）。</p>
</blockquote>
<p>古人观察星空，发现天体分作两类：一类固定在天球上，组成各个星座，形成一幅永恒的天空背景，称之为恒星；另一类天体在黄道附近运行，不断穿过黄道上的十二个星座（或中国的二十八宿），称之为行星。这些行星包括七颗（七曜），分别是阴阳——太阳和太阴（月球），以及五行——金木水火土五个肉眼可见的经典行星。太阳在黄道上一年运行一圈，太阴在黄道上一个月运行一圈。一定要注意，占星中的行星和实际的行星概念并不一致，这毕竟是古代天文学。由于整体一环为360度，所以每个星座占据了360/12 = 30 度。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/13704/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://imzy.vip/posts/22991/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="TigerInYourDream">
      <meta itemprop="description" content="每一篇文章都是一种进步，每一句感慨都是一次思考">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TID's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/22991/" class="post-title-link" itemprop="url">占星与星座计算 天球</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-04 18:49:23" itemprop="dateCreated datePublished" datetime="2021-08-04T18:49:23+00:00">2021-08-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-31 02:30:04" itemprop="dateModified" datetime="2025-07-31T02:30:04+00:00">2025-07-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A9%E6%96%87/" itemprop="url" rel="index"><span itemprop="name">天文</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="占星与星座计算-天球"><a href="#占星与星座计算-天球" class="headerlink" title="占星与星座计算 天球"></a>占星与星座计算 天球</h1><p>最近因为某些原因，有了一段空余的时间。当你空闲便有了一些奇思妙想。因为很多年前特别喜欢一个关于星座的故事，所以利用这一段空余时间写一个系列文章讲占星中的一个小知识。为了不使文章引起争议，特此声明：本人完全相信星座！不解释。文章的前面系列介绍和占星有关的天文基本概念，后面具体根据人的出生时间，地理位置（经纬度）来计算人的星座。可能读了这一系列的文章，大家可以更好的理解为什么星座归类于“占星学”，这样一个听起来非常正式的名字。另外因为不是撰写论文，本文不会详细列出各类依据。太累!</p>
<h2 id="天球概念"><a href="#天球概念" class="headerlink" title="天球概念"></a>天球概念</h2><p><img src="http://img.imzlp.com/imgs/alvin/%E5%A4%A9%E7%90%83%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt="天球示意图"></p>
<p>以上图片为完整的天球示意图</p>
<p>和地球概念相对，古代天文学家提出了天球的概念。天球是一个想想的球体，他也是旋转的。理论上具有无限大的半径且和地心是同心的。如图所示：和地球有赤道和南北极的概念对应，天球也有对应的天球赤道和天球南北极。</p>
<p>古代天文学家认为我们和星体是等距离的，尽管这并不正确。因为古代缺乏有效的天文观测手段。星球不是靠我们肉眼就可以判断出距离的。古代科学家克服了这种距离上的因素，使用角度来确定星球在天空中的位置。在当时观测条件受限的情况下，不失为一种很有效的天文抽象系统。</p>
<p>地球会围绕地轴自转，相对应于地球不动的参照系下。天球也会围着天极旋转，24小时不停。这就形成了古代天文学家的眼中的昼夜交替原理。太阳，卫星，形星都是东升西落的，这种称为天球的周日实视运动。地球因为有其公转，一颗横行总是比前一天提前（约4min）上升。</p>
<p>和地球对应的概念一样，天球也有自己的南北半球，对应也有南北回归线，南北极</p>
<blockquote>
<p>北回归线：北回归线是太阳在北半球能够垂直射到的离赤道最远的位置点，将该点之纬度线便叫“北回归线”，在公元2018年，其位置约在北纬23°26′11.3″ (或 23.43648°)。相反，南纬23°26′11.3″ (或 23.43648°)则为“南回归线”。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/22991/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="TigerInYourDream"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">TigerInYourDream</p>
  <div class="site-description" itemprop="description">每一篇文章都是一种进步，每一句感慨都是一次思考</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">TigerInYourDream</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">163k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:28</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
